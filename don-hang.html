<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Danh Sách Đơn Hàng - Nhà Sách</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bungee&family=Oswald:wght@200..700&family=Protest+Strike&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/e6d841051d.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
<script src="https://kit.fontawesome.com/e6d841051d.js" crossorigin="anonymous" defer></script>
    <link rel="stylesheet" href="don-hang.css" />
  
    <title>Đơn hàng</title>
  </head>
  <body>
    <header class="py-1 custom_header">
      <div
        class="container d-flex justify-content-between align-items-center me-5"
      >
        <a
          class="navbar-brand fs-3 logo_custom"
          href="index.html"
          style="color: #fea81f"
          >Group 3</a
        >
        <nav class="navbar navbar-expand-lg navbar-dark p-0">
          <div class="container-fluid">
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="nav justify-content-between align-items-center">
                <li class="nav-item nav-sub-hov text-custom btn">
                  <a
                    class="nav-link text-white active fs-6"
                    href="index.html"
                    id="home-tab"
                    >Home</a
                  >
                </li>
                <li class="nav-item nav-sub-hov text-custom btn">
                  <a
                    class="nav-link text-white fs-6"
                    href="nhan-vien.html"
                    id="about-tab"
                    >About</a
                  >
                </li>
                <li class="nav-item nav-sub-hov text-custom btn">
                  <a
                    class="nav-link text-white fs-6"
                    href="groupDiary.html"
                    id="diary-tab"
                    >Group diary</a
                  >
                </li>
                <li class="nav-item nav-sub-hov text-custom btn">
                  <a
                    class="nav-link text-white fs-5"
                    href="menuProject.html"
                    id="to_project-tab"
                    >Menu Project</a
                  >
                </li>
                <li class="nav-item nav-sub-hov text-custom btn">
                  <div class="dropdown">
                    <button
                      class="btn btn-secondary dropdown-toggle"
                      type="button"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      Quản lí sách
                    </button>
                    <ul class="dropdown-menu dropdown-menu-dark">
                      <li>
                        <a class="dropdown-item" href="sach-thieu-nhi.html"
                          >Sách thiếu nhi</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#">Sách khoa học</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="#">Sách học thuật</a>
                      </li>
                      <li>
                        <a class="dropdown-item" href="truyen-tranh-manga.html"
                          >Truyện tranh và Manga</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="sach-du-lich.html"
                          >Sách du lịch</a
                        >
                      </li>
                      <li><hr class="dropdown-divider" /></li>
                      <li>
                        <a class="dropdown-item" href="quan-li-sach2.html"
                          >Tổng hợp</a
                        >
                      </li>
                    </ul>
                  </div>
                </li>

                <li class="nav-item nav-sub-hov text-custom btn">
                  <a
                    class="nav-link text-white fs-6"
                    href="don-hang.html"
                    id="diary-tab"
                    >Đơn hàng</a
                  >
                </li>

                <li class="nav-item nav-sub-hov text-custom btn">
                  <a
                    class="nav-link text-white fs-5"
                    href="y-kien.html"
                    id="to_project-tab"
                    >Đánh giá</a
                  >
                </li>
                <li
                  class="nav-item nav-sub-hov text-custom btn btn-outline-primary p-0 login-custom"
                >
                  <a
                    class="nav-link text-white fs-5 px-4"
                    href="login.html"
                    id="login-tab"
                    >Login</a
                  >
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </header>
   
      <!-- Bảng danh sách đơn hàng -->
      <h1 style="color: rgb(78, 78, 236)">Danh Sách Đơn Hàng</h1>

      <section class="customer-form">
        <form id="addCustomerForm">
          <label for="customerName">Tên Khách Hàng:</label>
          <input type="text" id="customerName" required maxlength="50" />

          <label for="bookName">Tên Sách:</label>
          <input type="text" id="bookName" required maxlength="50" />

          <label for="price">Đơn Giá (VNĐ):</label>         
<input type="number" id="price" required min="0" step="1000" />


          <label for="purchaseDate">Ngày Mua:</label>
          <input type="date" id="purchaseDate" required />
         


          <button type="button" onclick="addCustomer()">Thêm Khách Hàng</button>
        </form>
      </section>

      <!-- Bảng danh sách khách hàng -->
      <section class="customer-list">
        <h2>Danh Sách Khách Hàng</h2>
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th>Tên Khách Hàng</th>
              <th>Tên Sách</th>
              <th>Đơn Giá (VNĐ)</th>
              <th>Ngày Mua</th>
              <th>Hành Động</th>   
              <!-- Cột Hành Động cho nút Xóa -->
            </tr>
          </thead>
          <tbody id="customerTableBody">
            <!-- Dữ liệu sẽ được thêm vào đây bằng JavaScript -->
          </tbody>
        </table>
      </section>

      <!-- Nút In và Lưu -->
      <section class="action-buttons">
        <button id="printButton" onclick="printList()">In Danh Sách</button>
        <button id="saveButton" onclick="saveList()">Lưu Danh Sách</button>
      </section>
      <script>
        // Hàm thêm khách hàng vào bảng
        function addCustomer() {
    // Lấy dữ liệu từ các ô input
    const customerName = document.getElementById("customerName").value.trim();
    const bookName = document.getElementById("bookName").value.trim();
    const price = document.getElementById("price").value.trim();
    const purchaseDate = document.getElementById("purchaseDate").value;

    // Kiểm tra các trường có dữ liệu hay không
    if (!customerName || !bookName || !price || !purchaseDate) {
      alert("Vui lòng điền đầy đủ thông tin khách hàng!");
      return;
    }

    // Tạo một hàng mới cho bảng
    const tableBody = document.getElementById("customerTableBody");
    const newRow = document.createElement("tr");

    // Tạo các cột dữ liệu
    newRow.innerHTML = `
      <td>${customerName}</td>
      <td>${bookName}</td>
      <td>${Number(price).toLocaleString()} VNĐ</td>
      <td>${new Date(purchaseDate).toLocaleDateString()}</td>
      <td>
        <button class="btn btn-danger btn-sm" onclick="deleteRow(this)">Xóa</button>
      </td>
    `;

    // Thêm hàng vào bảng
    tableBody.appendChild(newRow);

    // Xóa dữ liệu trong form để nhập dữ liệu mới
    document.getElementById("addCustomerForm").reset();
  }

  // Hàm xóa một hàng trong bảng
  function deleteRow(button) {
    const row = button.parentElement.parentElement; // Truy cập đến dòng cần xóa
    row.remove(); // Xóa dòng
  }
      
        // Hàm in danh sách khách hàng
        function printList() {
          const printContent = document.querySelector(".customer-list").innerHTML;
          const originalContent = document.body.innerHTML;
      
          // Đổi nội dung trang để chỉ in danh sách
          document.body.innerHTML = printContent;
          window.print();
      
          // Phục hồi lại nội dung trang sau khi in
          document.body.innerHTML = originalContent;
          location.reload();
        }
      
        // Hàm lưu danh sách vào localStorage
        function saveList() {
          const tableBody = document.getElementById("customerTableBody");
          const rows = tableBody.getElementsByTagName("tr");
          const customerList = [];
      
          // Lấy dữ liệu từ bảng
          for (const row of rows) {
            const cells = row.getElementsByTagName("td");
            customerList.push({
              name: cells[0].innerText,
              book: cells[1].innerText,
              price: cells[2].innerText,
              date: cells[3].innerText,
            });
          }
      
          // Lưu vào localStorage
          localStorage.setItem("customerList", JSON.stringify(customerList));
          alert("Danh sách đã được lưu thành công!");
        }
      
        // Hàm tải danh sách từ localStorage khi trang được mở
        function loadList() {
          const customerList = JSON.parse(localStorage.getItem("customerList")) || [];
          const tableBody = document.getElementById("customerTableBody");
      
          for (const customer of customerList) {
            const newRow = document.createElement("tr");
            newRow.innerHTML = `
              <td>${customer.name}</td>
              <td>${customer.book}</td>
              <td>${customer.price}</td>
              <td>${customer.date}</td>
              <td>
                <button class="btn btn-danger btn-sm" onclick="deleteCustomer(this)">Xóa</button>
              </td>
            `;
      
            tableBody.appendChild(newRow);
          }
        }
      
        // Gọi hàm loadList khi trang được tải
        window.onload = loadList;
      </script>
      
      <footer>
        <p>&copy; Nhà Sách ABC - 2024</p>
      </footer>
    </div>
  </body>
</html>
